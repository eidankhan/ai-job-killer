<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Job Risk Analyzer</title>

    <script>
        if (!localStorage.getItem('accessToken')) {
            window.location.href = 'login.html';
        }
    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="analyzer.css">
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">AI Job Killer</a>
            <div class="d-flex" id="nav-right">
                <span class="navbar-text me-3" id="welcome-message"></span>
                <button class="btn btn-outline-danger btn-sm" id="logout-button">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container my-4 my-md-5">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">

                <h1 class="app-title text-center">Find Out Your AI Risk Score</h1>
                <p class="app-subtitle text-center text-muted mb-4">
                    "Brutally honest, B2C-viral, action-oriented"
                </p>

                <form id="analyze-form">
                    <div class="search-container">
                        <div class="input-group input-group-lg mb-1">
                            <input type="text" class="form-control" id="jobInput" placeholder="Enter your job title..."
                                autocomplete="off" required>
                            <button class="btn btn-primary" type="submit" id="analyze-button">
                                <span class="btn-text">Analyze</span>
                                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                    style="display: none;"></span>
                            </button>
                        </div>
                        <div id="autocompleteList" class="autocomplete-list" style="display:none;"></div>
                    </div>
                </form>

                <div id="app-alert" class="alert alert-danger mt-3" style="display: none;"></div>

                <div id="result-card" class="result-card shadow-lg" style="display: none;">

                    <h3 id="card-occupation-title" class="card-title"></h3>
                    <h1 id="card-score" class="card-score"></h1>
                    <p id="card-verdict" class="card-verdict"></p>
                    <p id="card-explanation" class="card-explanation"></p>

                    <button class="btn btn-light btn-sm" id="share-button">
                        <i class="bi bi-share-fill"></i> Share My Score
                    </button>
                </div>

                <div id="action-plan" class="action-plan" style="display: none;">
                    <h2 class="action-title text-center">What To Do About It</h2>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="card h-100 action-card card-safe">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">
                                        <i class="bi bi-rocket-takeoff-fill me-2" style="color: #27ae60;"></i>
                                        Skills to Double-Down On
                                    </h5>
                                    <div id="safe-skills-list" class="skills-list-container mt-2">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100 action-card card-risk">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">
                                        <i class="bi bi-cone-striped me-2" style="color: #d93025;"></i>
                                        Skills at Risk
                                    </h5>
                                    <div id="risk-skills-list" class="skills-list-container mt-2">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a id="show-details-toggle" href="#">See Full Technical Breakdown</a>
                    </div>
                </div>

                <div id="output-details" class="result" style="display:none;">
                    <h3>Technical Breakdown</h3>
                    <div class="table-container">
                        <table class="table mb-0">
                            <thead>
                                <tr>
                                    <th>Skill</th>
                                    <th>Vulnerability</th>
                                </tr>
                            </thead>
                            <tbody id="details-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="config.js"></script>
    <script src="analyzer.js"></script>
</body>

</html>